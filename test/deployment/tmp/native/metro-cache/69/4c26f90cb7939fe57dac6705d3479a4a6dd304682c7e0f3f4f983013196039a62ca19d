{"dependencies":[{"name":"./PlatformChecker","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":103},"end":{"line":7,"column":43,"index":146}}],"key":"O136KS8LvzB4pufOIvMCitL6KOc="}},{"name":"./isSharedValue","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":9,"column":0,"index":184},"end":{"line":9,"column":48,"index":232}},{"start":{"line":9,"column":0,"index":184},"end":{"line":9,"column":48,"index":232}}],"key":"4GvsAaNC2OU71XMPPfpzkxeW9tk="}},{"name":"./threads","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":8,"column":0,"index":147},"end":{"line":8,"column":36,"index":183}},{"start":{"line":8,"column":0,"index":147},"end":{"line":8,"column":36,"index":183}}],"key":"ZuB0ICrjKM3htfPQkuonl9kPByQ="}}],"output":[{"data":{"code":"__d((function(g,r,i,a,m,e,d){'use strict';Object.defineProperty(e,\"__esModule\",{value:!0}),e.startMapper=function(t){var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],f=n+=1;return(0,r(d[2]).runOnUI)((function(){var n=function(){var n=g.__mapperRegistry;void 0===n&&(n=g.__mapperRegistry=s()),n.start(f,t,p,u)};return n.__closure={createMapperRegistry:s,mapperID:f,worklet:t,inputs:p,outputs:u},n.__workletHash=2799358392373,n.__initData=o,n})())(),f},e.stopMapper=function(t){(0,r(d[2]).runOnUI)((p=function(){var p=g.__mapperRegistry;null==p||p.stop(t)},p.__closure={mapperID:t},p.__workletHash=5914939239065,p.__initData=u,p))();var p};var t=(0,r(d[0]).isJest)(),p={code:\"function createMapperRegistry_mappersTs1(){const{IS_JEST,isSharedValue}=this.__closure;const mappers=new Map();let sortedMappers=[];let runRequested=false;let processingMappers=false;function updateMappersOrder(){const pre=new Map();mappers.forEach(function(mapper){if(mapper.outputs){for(const output of mapper.outputs){const preMappers=pre.get(output);if(preMappers===undefined){pre.set(output,[mapper]);}else{preMappers.push(mapper);}}}});const visited=new Set();const newOrder=[];function dfs(mapper){visited.add(mapper);for(const input of mapper.inputs){const preMappers=pre.get(input);if(preMappers){for(const preMapper of preMappers){if(!visited.has(preMapper)){dfs(preMapper);}}}}newOrder.push(mapper);}mappers.forEach(function(mapper){if(!visited.has(mapper)){dfs(mapper);}});sortedMappers=newOrder;}function mapperRun(){runRequested=false;if(processingMappers){return;}try{processingMappers=true;if(mappers.size!==sortedMappers.length){updateMappersOrder();}for(const mapper of sortedMappers){if(mapper.dirty){mapper.dirty=false;mapper.worklet();}}}finally{processingMappers=false;}}function maybeRequestUpdates(){if(IS_JEST){mapperRun();}else if(!runRequested){if(processingMappers){requestAnimationFrame(mapperRun);}else{queueMicrotask(mapperRun);}runRequested=true;}}function extractInputs(inputs,resultArray){if(Array.isArray(inputs)){for(const input of inputs){input&&extractInputs(input,resultArray);}}else if(isSharedValue(inputs)){resultArray.push(inputs);}else if(Object.getPrototypeOf(inputs)===Object.prototype){for(const element of Object.values(inputs)){element&&extractInputs(element,resultArray);}}return resultArray;}return{start:function(mapperID,worklet,inputs,outputs){const mapper={id:mapperID,dirty:true,worklet:worklet,inputs:extractInputs(inputs,[]),outputs:outputs};mappers.set(mapper.id,mapper);sortedMappers=[];for(const sv of mapper.inputs){sv.addListener(mapper.id,function(){mapper.dirty=true;maybeRequestUpdates();});}maybeRequestUpdates();},stop:function(mapperID){const mapper=mappers.get(mapperID);if(mapper){mappers.delete(mapper.id);sortedMappers=[];for(const sv of mapper.inputs){sv.removeListener(mapper.id);}}}};}\"},s=(function(){var s=function(){var p=new Map,s=[],n=!1,o=!1;function u(){var t=new Map;p.forEach((function(p){if(p.outputs)for(var s of p.outputs){var n=t.get(s);void 0===n?t.set(s,[p]):n.push(p)}}));var n=new Set,o=[];function u(p){for(var s of(n.add(p),p.inputs)){var f=t.get(s);if(f)for(var c of f)n.has(c)||u(c)}o.push(p)}p.forEach((function(t){n.has(t)||u(t)})),s=o}function f(){if(n=!1,!o)try{for(var t of(o=!0,p.size!==s.length&&u(),s))t.dirty&&(t.dirty=!1,t.worklet())}finally{o=!1}}function c(){t?f():n||(o?requestAnimationFrame(f):queueMicrotask(f),n=!0)}function l(t,p){if(Array.isArray(t))for(var s of t)s&&l(s,p);else if((0,r(d[1]).isSharedValue)(t))p.push(t);else if(Object.getPrototypeOf(t)===Object.prototype)for(var n of Object.values(t))n&&l(n,p);return p}return{start:function(t,n,o,u){var f={id:t,dirty:!0,worklet:n,inputs:l(o,[]),outputs:u};for(var y of(p.set(f.id,f),s=[],f.inputs))y.addListener(f.id,(function(){f.dirty=!0,c()}));c()},stop:function(t){var n=p.get(t);if(n)for(var o of(p.delete(n.id),s=[],n.inputs))o.removeListener(n.id)}}};return s.__closure={IS_JEST:t,isSharedValue:r(d[1]).isSharedValue},s.__workletHash=3430252739659,s.__initData=p,s})(),n=9999,o={code:\"function mappersTs2(){const{createMapperRegistry,mapperID,worklet,inputs,outputs}=this.__closure;let mapperRegistry=global.__mapperRegistry;if(mapperRegistry===undefined){mapperRegistry=global.__mapperRegistry=createMapperRegistry();}mapperRegistry.start(mapperID,worklet,inputs,outputs);}\"};var u={code:\"function mappersTs3(){const{mapperID}=this.__closure;const mapperRegistry=global.__mapperRegistry;mapperRegistry===null||mapperRegistry===void 0||mapperRegistry.stop(mapperID);}\"}}));","lineCount":1,"map":[[1,29,1,0],[1,42,1,13,"Object"],[1,49,1,13,"defineProperty"],[1,64,1,13,"e"],[1,66,1,13],[1,80,1,13,"value"],[1,87,1,13],[1,91,1,13,"e"],[1,93,1,13,"startMapper"],[1,105,200,7],[1,114,201,2,"worklet"],[1,117,204,10],[1,121,202,2,"inputs"],[1,123,202,25,"arguments"],[1,133,202,25,"length"],[1,140,202,25],[1,148,202,25,"undefined"],[1,152,202,25,"arguments"],[1,162,202,25],[1,165,202,25,"arguments"],[1,175,202,25],[1,178,202,28],[1,181,203,2,"outputs"],[1,183,203,24,"arguments"],[1,193,203,24,"length"],[1,200,203,24],[1,208,203,24,"undefined"],[1,212,203,24,"arguments"],[1,222,203,24],[1,225,203,24,"arguments"],[1,235,203,24],[1,238,203,27],[1,241,205,8,"mapperID"],[1,243,205,20,"MAPPER_ID"],[1,246,205,33],[1,248,215,2],[1,255,207,2],[1,257,207,2,"runOnUI"],[1,275,207,10],[1,290,207,10,"mappersTs2"],[1,292,207,10],[1,303,208,4],[1,307,208,8,"mapperRegistry"],[1,309,208,25,"global"],[1,311,208,32,"__mapperRegistry"],[1,333,209,27,"undefined"],[1,337,209,8,"mapperRegistry"],[1,341,210,6,"mapperRegistry"],[1,343,210,23,"global"],[1,345,210,30,"__mapperRegistry"],[1,362,210,49,"createMapperRegistry"],[1,367,212,4,"mapperRegistry"],[1,369,212,19,"start"],[1,375,212,25,"mapperID"],[1,377,212,35,"worklet"],[1,379,212,44,"inputs"],[1,381,212,52,"outputs"],[1,383,213,2],[1,385,212,59],[1,392,213,3,"mappersTs2"],[1,394,213,3,"__closure"],[1,404,213,3],[1,405,213,3,"createMapperRegistry"],[1,426,210,49,"createMapperRegistry"],[1,428,210,69,"mapperID"],[1,437,212,25,"mapperID"],[1,439,212,33,"worklet"],[1,447,212,35,"worklet"],[1,449,212,42,"inputs"],[1,456,212,44,"inputs"],[1,458,212,50,"outputs"],[1,466,212,52,"outputs"],[1,469,212,59,"mappersTs2"],[1,471,212,59,"__workletHash"],[1,485,212,59],[1,499,212,59,"mappersTs2"],[1,501,212,59,"__initData"],[1,512,212,59,"_worklet_2799358392373_init_data"],[1,514,212,59,"mappersTs2"],[1,515,212,59],[1,517,207,10],[1,520,207,2],[1,523,215,9,"mapperID"],[1,524,216,0],[1,526,1,13,"e"],[1,528,1,13,"stopMapper"],[1,539,218,7],[1,548,218,27,"mapperID"],[1,552,219,2],[1,554,219,2,"runOnUI"],[1,572,219,10,"mappersTs3"],[1,574,219,10],[1,585,220,4],[1,589,220,10,"mapperRegistry"],[1,591,220,27,"global"],[1,593,220,34,"__mapperRegistry"],[1,610,221,18],[1,616,221,4,"mapperRegistry"],[1,621,221,20,"stop"],[1,626,221,25,"mapperID"],[1,628,222,2],[1,630,222,3,"mappersTs3"],[1,632,222,3,"__closure"],[1,642,222,3],[1,643,222,3,"mapperID"],[1,652,221,25,"mapperID"],[1,655,221,33,"mappersTs3"],[1,657,221,33,"__workletHash"],[1,671,221,33],[1,685,221,33,"mappersTs3"],[1,687,221,33,"__initData"],[1,698,221,33,"_worklet_5914939239065_init_data"],[1,700,221,33,"mappersTs3"],[1,703,219,2],[1,706,219,10],[1,710,219,10,"mappersTs3"],[1,711,223,0],[1,713,11,0],[1,717,11,6,"IS_JEST"],[1,720,11,16],[1,722,11,16,"isJest"],[1,740,11,25,"_worklet_3430252739659_init_data"],[1,742,11,25],[1,743,11,25,"code"],[1,748,11,25],[1,2913,11,25,"createMapperRegistry"],[1,2916,23,0],[1,2931,23,0,"createMapperRegistry"],[1,2933,23,0],[1,2944,25,2],[1,2948,25,8,"mappers"],[1,2950,25,18],[1,2954,25,22,"Map"],[1,2958,26,6,"sortedMappers"],[1,2960,26,32],[1,2963,28,6,"runRequested"],[1,2966,28,21],[1,2968,29,6,"processingMappers"],[1,2971,29,26],[1,2973,31,2],[1,2982,31,11,"updateMappersOrder"],[1,2986,52,4],[1,2990,52,10,"pre"],[1,2992,52,16],[1,2996,52,20,"Map"],[1,3000,53,4,"mappers"],[1,3002,53,12,"forEach"],[1,3011,53,20],[1,3020,53,21,"mapper"],[1,3023,54,6],[1,3026,54,10,"mapper"],[1,3028,54,17,"outputs"],[1,3036,55,8],[1,3040,55,13],[1,3044,55,19,"output"],[1,3049,55,29,"mapper"],[1,3051,55,36,"outputs"],[1,3059,55,45],[1,3060,56,10],[1,3064,56,16,"preMappers"],[1,3066,56,29,"pre"],[1,3068,56,33,"get"],[1,3072,56,37,"output"],[1,3080,57,29,"undefined"],[1,3084,57,14,"preMappers"],[1,3086,58,12,"pre"],[1,3088,58,16,"set"],[1,3092,58,20,"output"],[1,3094,58,28],[1,3095,58,29,"mapper"],[1,3099,60,12,"preMappers"],[1,3101,60,23,"push"],[1,3106,60,28,"mapper"],[1,3108,62,8],[1,3109,64,4],[1,3113,65,4],[1,3117,65,10,"visited"],[1,3119,65,20],[1,3123,65,24,"Set"],[1,3127,66,10,"newOrder"],[1,3129,66,31],[1,3132,67,4],[1,3141,67,13,"dfs"],[1,3143,67,17,"mapper"],[1,3146,69,6],[1,3150,69,11],[1,3154,69,17,"input"],[1,3159,68,6,"visited"],[1,3161,68,14,"add"],[1,3165,68,18,"mapper"],[1,3168,69,26,"mapper"],[1,3170,69,33,"inputs"],[1,3178,69,41],[1,3179,70,8],[1,3183,70,14,"preMappers"],[1,3185,70,27,"pre"],[1,3187,70,31,"get"],[1,3191,70,35,"input"],[1,3194,71,8],[1,3197,71,12,"preMappers"],[1,3199,72,10],[1,3203,72,15],[1,3207,72,21,"preMapper"],[1,3212,72,34,"preMappers"],[1,3214,73,17,"visited"],[1,3216,73,25,"has"],[1,3220,73,29,"preMapper"],[1,3224,74,14,"dfs"],[1,3226,74,18,"preMapper"],[1,3228,78,6],[1,3229,79,6,"newOrder"],[1,3231,79,15,"push"],[1,3236,79,20,"mapper"],[1,3238,80,4],[1,3239,81,4,"mappers"],[1,3241,81,12,"forEach"],[1,3250,81,20],[1,3259,81,21,"mapper"],[1,3262,82,11,"visited"],[1,3264,82,19,"has"],[1,3268,82,23,"mapper"],[1,3272,83,8,"dfs"],[1,3274,83,12,"mapper"],[1,3276,85,4],[1,3280,86,4,"sortedMappers"],[1,3282,86,20,"newOrder"],[1,3283,87,2],[1,3284,89,2],[1,3293,89,11,"mapperRun"],[1,3297,91,4],[1,3300,90,4,"runRequested"],[1,3303,90,19],[1,3306,91,8,"processingMappers"],[1,3308,94,4],[1,3312,99,6],[1,3316,99,11],[1,3320,99,17,"mapper"],[1,3325,95,6,"processingMappers"],[1,3328,95,26],[1,3330,96,10,"mappers"],[1,3332,96,18,"size"],[1,3339,96,27,"sortedMappers"],[1,3341,96,41,"length"],[1,3349,97,8,"updateMappersOrder"],[1,3353,99,27,"sortedMappers"],[1,3356,100,12,"mapper"],[1,3358,100,19,"dirty"],[1,3366,101,10,"mapper"],[1,3368,101,17,"dirty"],[1,3375,101,25],[1,3377,102,10,"mapper"],[1,3379,102,17,"worklet"],[1,3389,105,4],[1,3390,105,5],[1,3398,106,6,"processingMappers"],[1,3401,106,26],[1,3402,107,4],[1,3403,108,2],[1,3404,110,2],[1,3413,110,11,"maybeRequestUpdates"],[1,3417,111,8,"IS_JEST"],[1,3419,118,6,"mapperRun"],[1,3423,119,16,"runRequested"],[1,3427,120,10,"processingMappers"],[1,3429,132,8,"requestAnimationFrame"],[1,3451,132,30,"mapperRun"],[1,3454,134,8,"queueMicrotask"],[1,3469,134,23,"mapperRun"],[1,3472,136,6,"runRequested"],[1,3475,136,21],[1,3477,138,2],[1,3478,140,2],[1,3487,140,11,"extractInputs"],[1,3489,141,4,"inputs"],[1,3491,142,4,"resultArray"],[1,3494,144,4],[1,3497,144,8,"Array"],[1,3503,144,14,"isArray"],[1,3511,144,22,"inputs"],[1,3514,145,6],[1,3518,145,11],[1,3522,145,17,"input"],[1,3527,145,26,"inputs"],[1,3529,146,8,"input"],[1,3532,146,17,"extractInputs"],[1,3534,146,31,"input"],[1,3536,146,38,"resultArray"],[1,3544,148,11],[1,3548,148,15],[1,3550,148,15,"isSharedValue"],[1,3573,148,29,"inputs"],[1,3576,149,6,"resultArray"],[1,3578,149,18,"push"],[1,3583,149,23,"inputs"],[1,3591,150,11],[1,3594,150,15,"Object"],[1,3601,150,22,"getPrototypeOf"],[1,3616,150,37,"inputs"],[1,3621,150,49,"Object"],[1,3628,150,56,"prototype"],[1,3638,154,6],[1,3642,154,11],[1,3646,154,17,"element"],[1,3651,154,28,"Object"],[1,3658,154,35,"values"],[1,3665,154,42,"inputs"],[1,3668,155,8,"element"],[1,3671,155,19,"extractInputs"],[1,3673,155,33,"element"],[1,3675,155,42,"resultArray"],[1,3678,158,4],[1,3685,158,11,"resultArray"],[1,3686,159,2],[1,3687,161,2],[1,3693,161,9],[1,3694,162,4,"start"],[1,3700,162,11],[1,3709,163,6,"mapperID"],[1,3711,164,6,"worklet"],[1,3713,165,6,"inputs"],[1,3715,166,6,"outputs"],[1,3718,168,6],[1,3722,168,12,"mapper"],[1,3724,168,29],[1,3725,169,8,"id"],[1,3728,169,12,"mapperID"],[1,3730,170,8,"dirty"],[1,3737,170,15],[1,3739,171,8,"worklet"],[1,3749,172,8,"inputs"],[1,3756,172,16,"extractInputs"],[1,3758,172,30,"inputs"],[1,3760,172,38],[1,3764,173,8,"outputs"],[1,3775,177,6],[1,3779,177,11],[1,3783,177,17,"sv"],[1,3788,175,6,"mappers"],[1,3790,175,14,"set"],[1,3794,175,18,"mapper"],[1,3796,175,25,"id"],[1,3799,175,29,"mapper"],[1,3802,176,6,"sortedMappers"],[1,3804,176,22],[1,3807,177,23,"mapper"],[1,3809,177,30,"inputs"],[1,3817,178,8,"sv"],[1,3819,178,11,"addListener"],[1,3831,178,23,"mapper"],[1,3833,178,30,"id"],[1,3837,178,34],[1,3848,179,10,"mapper"],[1,3850,179,17,"dirty"],[1,3857,179,25],[1,3859,180,10,"maybeRequestUpdates"],[1,3862,181,8],[1,3866,183,6,"maybeRequestUpdates"],[1,3869,184,4],[1,3871,185,4,"stop"],[1,3876,185,10],[1,3885,185,11,"mapperID"],[1,3888,186,6],[1,3892,186,12,"mapper"],[1,3894,186,21,"mappers"],[1,3896,186,29,"get"],[1,3900,186,33,"mapperID"],[1,3903,187,6],[1,3906,187,10,"mapper"],[1,3908,190,8],[1,3912,190,13],[1,3916,190,19,"sv"],[1,3921,188,8,"mappers"],[1,3923,188,16,"delete"],[1,3930,188,23,"mapper"],[1,3932,188,30,"id"],[1,3936,189,8,"sortedMappers"],[1,3938,189,24],[1,3941,190,25,"mapper"],[1,3943,190,32,"inputs"],[1,3951,191,10,"sv"],[1,3953,191,13,"removeListener"],[1,3968,191,28,"mapper"],[1,3970,191,35,"id"],[1,3973,194,4],[1,3975,196,0],[1,3977,148,28],[1,3984,196,1,"createMapperRegistry"],[1,3986,196,1,"__closure"],[1,3996,196,1],[1,3997,196,1,"IS_JEST"],[1,4005,111,8,"IS_JEST"],[1,4007,111,15,"isSharedValue"],[1,4021,148,15,"isSharedValue"],[1,4044,148,28,"createMapperRegistry"],[1,4046,148,28,"__workletHash"],[1,4060,148,28],[1,4074,148,28,"createMapperRegistry"],[1,4076,148,28,"__initData"],[1,4087,148,28,"_worklet_3430252739659_init_data"],[1,4089,148,28,"createMapperRegistry"],[1,4090,148,28],[1,4092,23,0],[1,4095,198,4,"MAPPER_ID"],[1,4097,198,16],[1,4102,198,21,"_worklet_2799358392373_init_data"],[1,4104,198,21],[1,4105,198,21,"code"],[1,4110,198,21],[1,4403,216,1],[1,4407,216,1,"_worklet_5914939239065_init_data"],[1,4409,216,1],[1,4410,216,1,"code"],[1,4415,216,1],[1,4595,223,1],[1,4599]],"functionMap":{"names":["<global>","createMapperRegistry","updateMappersOrder","forEach$argument_0","dfs","mapperRun","maybeRequestUpdates","extractInputs","start","sv.addListener$argument_1","stop","startMapper","runOnUI$argument_0","stopMapper"],"mappings":"AAA;ACsB;ECQ;oBCsB;KDW;IEG;KFa;oBCC;KDI;GDE;EIE;GJmB;EKE;GL4B;EME;GNmB;WOG;kCCgB;SDG;KPG;USC;KTS;CDE;OWI;UCO;GDM;CXG;OaE;UDC;GCG;CbC"}},"type":"js/module"}]}
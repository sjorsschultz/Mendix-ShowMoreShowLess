{"dependencies":[{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":1,"column":0},"end":{"line":183,"column":27}}],"key":"yg7e6laZwmpbIvId5jovq9ugXp8="}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":1,"column":0},"end":{"line":183,"column":27}}],"key":"Z6pzkVZ2fvxBLkFTgVVOy4UDj30="}},{"name":"invariant","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":14,"column":18},"end":{"line":14,"column":38}}],"key":"oQpL0Es3H146KnQH9ygFeHrzVP4="}}],"output":[{"data":{"code":"__d((function(g,r,i,a,m,_e,d){'use strict';var e=r(d[0]),t=r(d[1]),u=(function(){return t((function t(u){var s=u.onMoreTasks;e(this,t),this._onMoreTasks=s,this._queueStack=[{tasks:[],popable:!1}]}),[{key:\"enqueue\",value:function(e){this._getCurrentQueue().push(e)}},{key:\"enqueueTasks\",value:function(e){var t=this;e.forEach((function(e){return t.enqueue(e)}))}},{key:\"cancelTasks\",value:function(e){this._queueStack=this._queueStack.map((function(t){return Object.assign({},t,{tasks:t.tasks.filter((function(t){return-1===e.indexOf(t)}))})})).filter((function(e,t){return e.tasks.length>0||0===t}))}},{key:\"hasTasksToProcess\",value:function(){return this._getCurrentQueue().length>0}},{key:\"processNext\",value:function(){var e=this._getCurrentQueue();if(e.length){var t=e.shift();try{'object'==typeof t&&t.gen?this._genPromise(t):'object'==typeof t&&t.run?t.run():(r(d[2])('function'==typeof t,'Expected Function, SimpleTask, or PromiseTask, but got:\\n'+JSON.stringify(t,null,2)),t())}catch(e){throw e.message='TaskQueue: Error with task '+(t.name||'')+': '+e.message,e}}}},{key:\"_getCurrentQueue\",value:function(){var e=this._queueStack.length-1,t=this._queueStack[e];return t.popable&&0===t.tasks.length&&this._queueStack.length>1?(this._queueStack.pop(),this._getCurrentQueue()):t.tasks}},{key:\"_genPromise\",value:function(e){var t=this;this._queueStack.push({tasks:[],popable:!1});var u=this._queueStack.length-1,s=this._queueStack[u];e.gen().then((function(){s.popable=!0,t.hasTasksToProcess()&&t._onMoreTasks()})).catch((function(t){setTimeout((function(){throw t.message=`TaskQueue: Error resolving Promise in task ${e.name}: ${t.message}`,t}),0)}))}}])})();m.exports=u}));","lineCount":1,"map":[[1,30,11,0],[1,43,11,13],[1,47,11,13,"_classCallCheck"],[1,49,11,13,"r"],[1,51,11,13,"d"],[1,53,11,13],[1,57,11,13,"_createClass"],[1,59,11,13,"r"],[1,61,11,13,"d"],[1,63,11,13],[1,67,44,6,"TaskQueue"],[1,70,44,15],[1,81,55,3],[1,88,55,3,"_createClass"],[1,91,52,2],[1,100,52,2,"TaskQueue"],[1,102,52,2,"_ref"],[1,105,52,61],[1,109,52,15,"onMoreTasks"],[1,111,52,26,"_ref"],[1,113,52,15,"onMoreTasks"],[1,125,52,26,"_classCallCheck"],[1,127,52,26,"this"],[1,132,52,26,"TaskQueue"],[1,135,53,4,"this"],[1,140,53,9,"_onMoreTasks"],[1,153,53,24,"onMoreTasks"],[1,155,54,4,"this"],[1,160,54,9,"_queueStack"],[1,172,54,23],[1,173,54,24],[1,174,54,25,"tasks"],[1,180,54,32],[1,183,54,36,"popable"],[1,192,54,45],[1,195,55,2],[1,198,55,3],[1,200,55,3,"key"],[1,204,55,3],[1,214,55,3,"value"],[1,220,62,2],[1,229,62,10,"task"],[1,232,63,4,"this"],[1,237,63,9,"_getCurrentQueue"],[1,256,63,28,"push"],[1,261,63,33,"task"],[1,263,64,2],[1,266,64,3],[1,267,64,3,"key"],[1,271,64,3],[1,286,64,3,"value"],[1,292,66,2],[1,301,66,15,"tasks"],[1,304,66,41],[1,308,66,41,"_this"],[1,310,66,41,"this"],[1,315,67,4,"tasks"],[1,317,67,10,"forEach"],[1,326,67,18],[1,335,67,18,"task"],[1,338,67,22],[1,345,67,26,"_this"],[1,347,67,31,"enqueue"],[1,355,67,39,"task"],[1,357,67,44],[1,360,68,2],[1,363,68,3],[1,364,68,3,"key"],[1,368,68,3],[1,382,68,3,"value"],[1,388,70,2],[1,397,70,14,"tasksToCancel"],[1,400,72,4,"this"],[1,405,72,9,"_queueStack"],[1,417,72,23,"this"],[1,422,72,28,"_queueStack"],[1,434,73,7,"map"],[1,439,73,11],[1,448,73,11,"queue"],[1,451,73,16],[1,458,73,16,"Object"],[1,465,73,16,"assign"],[1,472,73,16],[1,475,74,11,"queue"],[1,477,74,16],[1,478,75,8,"tasks"],[1,484,75,15,"queue"],[1,486,75,21,"tasks"],[1,492,75,27,"filter"],[1,500,75,34],[1,509,75,34,"task"],[1,512,75,38],[1,519,75,69],[1,523,75,42,"tasksToCancel"],[1,525,75,56,"indexOf"],[1,533,75,64,"task"],[1,535,75,76],[1,540,75,77],[1,544,77,7,"filter"],[1,552,77,14],[1,561,77,15,"queue"],[1,563,77,22,"idx"],[1,566,77,25],[1,573,77,30,"queue"],[1,575,77,36,"tasks"],[1,581,77,42,"length"],[1,588,77,51],[1,591,77,64],[1,595,77,56,"idx"],[1,596,77,65],[1,599,78,2],[1,602,78,3],[1,603,78,3,"key"],[1,607,78,3],[1,627,78,3,"value"],[1,633,90,2],[1,644,91,4],[1,651,91,11,"this"],[1,656,91,16,"_getCurrentQueue"],[1,675,91,35,"length"],[1,682,91,44],[1,683,92,2],[1,686,92,3],[1,687,92,3,"key"],[1,691,92,3],[1,705,92,3,"value"],[1,711,97,2],[1,722,98,4],[1,726,98,10,"queue"],[1,728,98,18,"this"],[1,733,98,23,"_getCurrentQueue"],[1,752,99,4],[1,755,99,8,"queue"],[1,757,99,14,"length"],[1,764,99,22],[1,765,100,6],[1,769,100,12,"task"],[1,771,100,19,"queue"],[1,773,100,25,"shift"],[1,781,101,6],[1,785,102,28],[1,802,102,19,"task"],[1,805,102,40,"task"],[1,807,102,45,"gen"],[1,811,104,10,"this"],[1,816,104,15,"_genPromise"],[1,828,104,27,"task"],[1,831,105,35],[1,848,105,26,"task"],[1,851,105,47,"task"],[1,853,105,52,"run"],[1,857,107,10,"task"],[1,859,107,15,"run"],[1,866,109,10,"r"],[1,868,109,10,"d"],[1,870,109,10],[1,873,109,10,"r"],[1,874,110,28],[1,893,110,19,"task"],[1,895,111,12],[1,955,112,14,"JSON"],[1,960,112,19,"stringify"],[1,970,112,29,"task"],[1,972,112,35],[1,977,112,41],[1,981,115,10,"task"],[1,985,117,6],[1,986,117,8],[1,992,117,15,"e"],[1,995,121,8],[1,1001,118,8,"e"],[1,1003,118,10,"message"],[1,1011,120,10],[1,1042,120,43,"task"],[1,1044,120,48,"name"],[1,1050,120,56],[1,1054,120,62],[1,1059,120,69,"e"],[1,1061,120,71,"message"],[1,1069,121,14,"e"],[1,1070,122,6],[1,1071,123,4],[1,1072,124,2],[1,1075,124,3],[1,1076,124,3,"key"],[1,1080,124,3],[1,1099,124,3,"value"],[1,1105,133,2],[1,1116,134,4],[1,1120,134,10,"stackIdx"],[1,1122,134,21,"this"],[1,1127,134,26,"_queueStack"],[1,1139,134,38,"length"],[1,1146,134,47],[1,1148,135,10,"queue"],[1,1150,135,18,"this"],[1,1155,135,23,"_queueStack"],[1,1167,135,35,"stackIdx"],[1,1170,136,4],[1,1177,137,6,"queue"],[1,1179,137,12,"popable"],[1,1188,138,29],[1,1192,138,6,"queue"],[1,1194,138,12,"tasks"],[1,1200,138,18,"length"],[1,1208,139,6,"this"],[1,1213,139,11,"_queueStack"],[1,1225,139,23,"length"],[1,1232,139,32],[1,1235,141,6,"this"],[1,1240,141,11,"_queueStack"],[1,1252,141,23,"pop"],[1,1258,147,13,"this"],[1,1263,147,18,"_getCurrentQueue"],[1,1283,149,13,"queue"],[1,1285,149,19,"tasks"],[1,1290,151,2],[1,1293,151,3],[1,1294,151,3,"key"],[1,1298,151,3],[1,1312,151,3,"value"],[1,1318,153,2],[1,1327,153,14,"task"],[1,1330,153,33],[1,1334,153,33,"_this2"],[1,1336,153,33,"this"],[1,1341,158,4,"this"],[1,1346,158,9,"_queueStack"],[1,1358,158,21,"push"],[1,1363,158,26],[1,1364,158,27,"tasks"],[1,1370,158,34],[1,1373,158,38,"popable"],[1,1382,158,47],[1,1386,159,4],[1,1390,159,10,"stackIdx"],[1,1392,159,21,"this"],[1,1397,159,26,"_queueStack"],[1,1409,159,38,"length"],[1,1416,159,47],[1,1418,160,10,"stackItem"],[1,1420,160,22,"this"],[1,1425,160,27,"_queueStack"],[1,1437,160,39,"stackIdx"],[1,1440,163,4,"task"],[1,1442,164,7,"gen"],[1,1448,165,7,"then"],[1,1454,165,12],[1,1465,171,8,"stackItem"],[1,1467,171,18,"popable"],[1,1476,171,28],[1,1478,172,8,"_this2"],[1,1480,172,13,"hasTasksToProcess"],[1,1501,172,36,"_this2"],[1,1503,172,41,"_onMoreTasks"],[1,1517,173,6],[1,1521,174,7,"catch"],[1,1528,174,13],[1,1537,174,13,"ex"],[1,1540,175,8,"setTimeout"],[1,1552,175,19],[1,1563,177,10],[1,1569,176,10,"ex"],[1,1571,176,13,"message"],[1,1579,176,23],[1,1625,176,69,"task"],[1,1627,176,74,"name"],[1,1636,176,83,"ex"],[1,1638,176,86,"message"],[1,1648,177,16,"ex"],[1,1649,178,8],[1,1652,178,11],[1,1654,179,6],[1,1657,180,2],[1,1661,180,3],[1,1663,44,15],[1,1666,183,0,"module"],[1,1668,183,7,"exports"],[1,1676,183,17,"TaskQueue"],[1,1677,183,27],[1,1681]],"functionMap":{"names":["<global>","TaskQueue","constructor","enqueue","enqueueTasks","tasks.forEach$argument_0","cancelTasks","_queueStack.map$argument_0","queue.tasks.filter$argument_0","_queueStack.map.filter$argument_0","hasTasksToProcess","processNext","_getCurrentQueue","_genPromise","task.gen.then$argument_0","task.gen.then._catch$argument_0","setTimeout$argument_0"],"mappings":"AAA;AC2C;ECQ;GDG;EEO;GFE;EGE;kBCC,0BD;GHC;EKE;WCG;kCCE,0CD;QDC;cGC,mDH;GLC;ESY;GTE;EUK;GV2B;EWS;GXkB;EYE;YCY;ODQ;aEC;mBCC;SDG;OFC;GZC;CDC"}},"type":"js/module"}]}
{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":1,"column":0},"end":{"line":179,"column":29}}],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk="}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":1,"column":0},"end":{"line":179,"column":29}}],"key":"yg7e6laZwmpbIvId5jovq9ugXp8="}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":1,"column":0},"end":{"line":179,"column":29}}],"key":"Z6pzkVZ2fvxBLkFTgVVOy4UDj30="}},{"name":"./NativeBlobModule","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":13,"column":0},"end":{"line":13,"column":50}}],"key":"U6TvaDH8SXQ+L3uxoXKyiOMXH+8="}},{"name":"invariant","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":14,"column":0},"end":{"line":14,"column":34}}],"key":"4HPAaDQ25ZwZ2dzTLatXuUucZUM="}},{"name":"./Blob","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":16,"column":13},"end":{"line":16,"column":30}},{"start":{"line":16,"column":13},"end":{"line":16,"column":30}}],"key":"mgvDEIvsyYQQJCSt18UmaoHoX6k="}},{"name":"./BlobRegistry","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":17,"column":21},"end":{"line":17,"column":46}},{"start":{"line":17,"column":21},"end":{"line":17,"column":46}},{"start":{"line":17,"column":21},"end":{"line":17,"column":46}}],"key":"JHbMLLFwEH95R1ixWPXDXrku130="}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  var _classCallCheck2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/classCallCheck\"));\n  var _createClass2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[2], \"@babel/runtime/helpers/createClass\"));\n  var _NativeBlobModule = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[3], \"./NativeBlobModule\"));\n  var _invariant = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[4], \"invariant\"));\n  function uuidv4() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n      var r = Math.random() * 16 | 0,\n        v = c == 'x' ? r : r & 0x3 | 0x8;\n      return v.toString(16);\n    });\n  }\n  function createBlobCollector(blobId) {\n    if (global.__blobCollectorProvider == null) {\n      return null;\n    } else {\n      return global.__blobCollectorProvider(blobId);\n    }\n  }\n  var BlobManager = /*#__PURE__*/function () {\n    function BlobManager() {\n      (0, _classCallCheck2.default)(this, BlobManager);\n    }\n    return (0, _createClass2.default)(BlobManager, null, [{\n      key: \"createFromParts\",\n      value: function createFromParts(parts, options) {\n        (0, _invariant.default)(_NativeBlobModule.default, 'NativeBlobModule is available.');\n        var blobId = uuidv4();\n        var items = parts.map(function (part) {\n          if (part instanceof ArrayBuffer || ArrayBuffer.isView(part)) {\n            throw new Error(\"Creating blobs from 'ArrayBuffer' and 'ArrayBufferView' are not supported\");\n          }\n          if (part instanceof _$$_REQUIRE(_dependencyMap[5], \"./Blob\")) {\n            return {\n              data: part.data,\n              type: 'blob'\n            };\n          } else {\n            return {\n              data: String(part),\n              type: 'string'\n            };\n          }\n        });\n        var size = items.reduce(function (acc, curr) {\n          if (curr.type === 'string') {\n            return acc + global.unescape(encodeURI(curr.data)).length;\n          } else {\n            return acc + curr.data.size;\n          }\n        }, 0);\n        _NativeBlobModule.default.createFromParts(items, blobId);\n        return BlobManager.createFromOptions({\n          blobId: blobId,\n          offset: 0,\n          size: size,\n          type: options ? options.type : '',\n          lastModified: options ? options.lastModified : Date.now()\n        });\n      }\n    }, {\n      key: \"createFromOptions\",\n      value: function createFromOptions(options) {\n        _$$_REQUIRE(_dependencyMap[6], \"./BlobRegistry\").register(options.blobId);\n        return Object.assign(Object.create(_$$_REQUIRE(_dependencyMap[5], \"./Blob\").prototype), {\n          data: options.__collector == null ? Object.assign({}, options, {\n            __collector: createBlobCollector(options.blobId)\n          }) : options\n        });\n      }\n    }, {\n      key: \"release\",\n      value: function release(blobId) {\n        (0, _invariant.default)(_NativeBlobModule.default, 'NativeBlobModule is available.');\n        _$$_REQUIRE(_dependencyMap[6], \"./BlobRegistry\").unregister(blobId);\n        if (_$$_REQUIRE(_dependencyMap[6], \"./BlobRegistry\").has(blobId)) {\n          return;\n        }\n        _NativeBlobModule.default.release(blobId);\n      }\n    }, {\n      key: \"addNetworkingHandler\",\n      value: function addNetworkingHandler() {\n        (0, _invariant.default)(_NativeBlobModule.default, 'NativeBlobModule is available.');\n        _NativeBlobModule.default.addNetworkingHandler();\n      }\n    }, {\n      key: \"addWebSocketHandler\",\n      value: function addWebSocketHandler(socketId) {\n        (0, _invariant.default)(_NativeBlobModule.default, 'NativeBlobModule is available.');\n        _NativeBlobModule.default.addWebSocketHandler(socketId);\n      }\n    }, {\n      key: \"removeWebSocketHandler\",\n      value: function removeWebSocketHandler(socketId) {\n        (0, _invariant.default)(_NativeBlobModule.default, 'NativeBlobModule is available.');\n        _NativeBlobModule.default.removeWebSocketHandler(socketId);\n      }\n    }, {\n      key: \"sendOverSocket\",\n      value: function sendOverSocket(blob, socketId) {\n        (0, _invariant.default)(_NativeBlobModule.default, 'NativeBlobModule is available.');\n        _NativeBlobModule.default.sendOverSocket(blob.data, socketId);\n      }\n    }]);\n  }();\n  BlobManager.isAvailable = !!_NativeBlobModule.default;\n  module.exports = BlobManager;\n});","lineCount":110,"map":[[5,2,13,0],[5,6,13,0,"_NativeBlobModule"],[5,23,13,0],[5,26,13,0,"_interopRequireDefault"],[5,48,13,0],[5,49,13,0,"_$$_REQUIRE"],[5,60,13,0],[5,61,13,0,"_dependencyMap"],[5,75,13,0],[6,2,14,0],[6,6,14,0,"_invariant"],[6,16,14,0],[6,19,14,0,"_interopRequireDefault"],[6,41,14,0],[6,42,14,0,"_$$_REQUIRE"],[6,53,14,0],[6,54,14,0,"_dependencyMap"],[6,68,14,0],[7,2,26,0],[7,11,26,9,"uuidv4"],[7,17,26,15,"uuidv4"],[7,18,26,15],[7,20,26,26],[8,4,27,2],[8,11,27,9],[8,49,27,47],[8,50,27,48,"replace"],[8,57,27,55],[8,58,27,56],[8,65,27,63],[8,67,27,65],[8,77,27,65,"c"],[8,78,27,66],[8,80,27,70],[9,6,28,4],[9,10,28,10,"r"],[9,11,28,11],[9,14,28,15,"Math"],[9,18,28,19],[9,19,28,20,"random"],[9,25,28,26],[9,26,28,27],[9,27,28,28],[9,30,28,31],[9,32,28,33],[9,35,28,37],[9,36,28,38],[10,8,29,6,"v"],[10,9,29,7],[10,12,29,10,"c"],[10,13,29,11],[10,17,29,15],[10,20,29,18],[10,23,29,21,"r"],[10,24,29,22],[10,27,29,26,"r"],[10,28,29,27],[10,31,29,30],[10,34,29,33],[10,37,29,37],[10,40,29,40],[11,6,30,4],[11,13,30,11,"v"],[11,14,30,12],[11,15,30,13,"toString"],[11,23,30,21],[11,24,30,22],[11,26,30,24],[11,27,30,25],[12,4,31,2],[12,5,31,3],[12,6,31,4],[13,2,32,0],[14,2,41,0],[14,11,41,9,"createBlobCollector"],[14,30,41,28,"createBlobCollector"],[14,31,41,29,"blobId"],[14,37,41,43],[14,39,41,67],[15,4,42,2],[15,8,42,6,"global"],[15,14,42,12],[15,15,42,13,"__blobCollectorProvider"],[15,38,42,36],[15,42,42,40],[15,46,42,44],[15,48,42,46],[16,6,43,4],[16,13,43,11],[16,17,43,15],[17,4,44,2],[17,5,44,3],[17,11,44,9],[18,6,45,4],[18,13,45,11,"global"],[18,19,45,17],[18,20,45,18,"__blobCollectorProvider"],[18,43,45,41],[18,44,45,42,"blobId"],[18,50,45,48],[18,51,45,49],[19,4,46,2],[20,2,47,0],[21,2,47,1],[21,6,52,6,"BlobManager"],[21,17,52,17],[22,4,52,17],[22,13,52,17,"BlobManager"],[22,25,52,17],[23,6,52,17],[23,10,52,17,"_classCallCheck2"],[23,26,52,17],[23,27,52,17,"default"],[23,34,52,17],[23,42,52,17,"BlobManager"],[23,53,52,17],[24,4,52,17],[25,4,52,17],[25,15,52,17,"_createClass2"],[25,28,52,17],[25,29,52,17,"default"],[25,36,52,17],[25,38,52,17,"BlobManager"],[25,49,52,17],[26,6,52,17,"key"],[26,9,52,17],[27,6,52,17,"value"],[27,11,52,17],[27,13,61,2],[27,22,61,9,"createFromParts"],[27,37,61,24,"createFromParts"],[27,38,62,4,"parts"],[27,43,62,31],[27,45,63,4,"options"],[27,52,63,25],[27,54,64,10],[28,8,65,4],[28,12,65,4,"invariant"],[28,30,65,13],[28,32,65,14,"NativeBlobModule"],[28,57,65,30],[28,59,65,32],[28,91,65,64],[28,92,65,65],[29,8,67,4],[29,12,67,10,"blobId"],[29,18,67,16],[29,21,67,19,"uuidv4"],[29,27,67,25],[29,28,67,26],[29,29,67,27],[30,8,68,4],[30,12,68,10,"items"],[30,17,68,15],[30,20,68,18,"parts"],[30,25,68,23],[30,26,68,24,"map"],[30,29,68,27],[30,30,68,28],[30,40,68,28,"part"],[30,44,68,32],[30,46,68,36],[31,10,69,6],[31,14,69,10,"part"],[31,18,69,14],[31,30,69,26,"ArrayBuffer"],[31,41,69,37],[31,45,69,41,"ArrayBuffer"],[31,56,69,52],[31,57,69,53,"isView"],[31,63,69,59],[31,64,69,60,"part"],[31,68,69,64],[31,69,69,65],[31,71,69,67],[32,12,70,8],[32,18,70,14],[32,22,70,18,"Error"],[32,27,70,23],[32,28,71,10],[32,103,72,8],[32,104,72,9],[33,10,73,6],[34,10,74,6],[34,14,74,10,"part"],[34,18,74,14],[34,30,74,14,"_$$_REQUIRE"],[34,41,74,14],[34,42,74,14,"_dependencyMap"],[34,56,74,14],[34,70,74,30],[34,72,74,32],[35,12,75,8],[35,19,75,15],[36,14,76,10,"data"],[36,18,76,14],[36,20,76,16,"part"],[36,24,76,20],[36,25,76,21,"data"],[36,29,76,25],[37,14,77,10,"type"],[37,18,77,14],[37,20,77,16],[38,12,78,8],[38,13,78,9],[39,10,79,6],[39,11,79,7],[39,17,79,13],[40,12,80,8],[40,19,80,15],[41,14,81,10,"data"],[41,18,81,14],[41,20,81,16,"String"],[41,26,81,22],[41,27,81,23,"part"],[41,31,81,27],[41,32,81,28],[42,14,82,10,"type"],[42,18,82,14],[42,20,82,16],[43,12,83,8],[43,13,83,9],[44,10,84,6],[45,8,85,4],[45,9,85,5],[45,10,85,6],[46,8,86,4],[46,12,86,10,"size"],[46,16,86,14],[46,19,86,17,"items"],[46,24,86,22],[46,25,86,23,"reduce"],[46,31,86,29],[46,32,86,30],[46,42,86,31,"acc"],[46,45,86,34],[46,47,86,36,"curr"],[46,51,86,40],[46,53,86,45],[47,10,87,6],[47,14,87,10,"curr"],[47,18,87,14],[47,19,87,15,"type"],[47,23,87,19],[47,28,87,24],[47,36,87,32],[47,38,87,34],[48,12,88,8],[48,19,88,15,"acc"],[48,22,88,18],[48,25,88,21,"global"],[48,31,88,27],[48,32,88,28,"unescape"],[48,40,88,36],[48,41,88,37,"encodeURI"],[48,50,88,46],[48,51,88,47,"curr"],[48,55,88,51],[48,56,88,52,"data"],[48,60,88,56],[48,61,88,57],[48,62,88,58],[48,63,88,59,"length"],[48,69,88,65],[49,10,89,6],[49,11,89,7],[49,17,89,13],[50,12,90,8],[50,19,90,15,"acc"],[50,22,90,18],[50,25,90,21,"curr"],[50,29,90,25],[50,30,90,26,"data"],[50,34,90,30],[50,35,90,31,"size"],[50,39,90,35],[51,10,91,6],[52,8,92,4],[52,9,92,5],[52,11,92,7],[52,12,92,8],[52,13,92,9],[53,8,94,4,"NativeBlobModule"],[53,33,94,20],[53,34,94,21,"createFromParts"],[53,49,94,36],[53,50,94,37,"items"],[53,55,94,42],[53,57,94,44,"blobId"],[53,63,94,50],[53,64,94,51],[54,8,96,4],[54,15,96,11,"BlobManager"],[54,26,96,22],[54,27,96,23,"createFromOptions"],[54,44,96,40],[54,45,96,41],[55,10,97,6,"blobId"],[55,16,97,12],[55,18,97,6,"blobId"],[55,24,97,12],[56,10,98,6,"offset"],[56,16,98,12],[56,18,98,14],[56,19,98,15],[57,10,99,6,"size"],[57,14,99,10],[57,16,99,6,"size"],[57,20,99,10],[58,10,100,6,"type"],[58,14,100,10],[58,16,100,12,"options"],[58,23,100,19],[58,26,100,22,"options"],[58,33,100,29],[58,34,100,30,"type"],[58,38,100,34],[58,41,100,37],[58,43,100,39],[59,10,101,6,"lastModified"],[59,22,101,18],[59,24,101,20,"options"],[59,31,101,27],[59,34,101,30,"options"],[59,41,101,37],[59,42,101,38,"lastModified"],[59,54,101,50],[59,57,101,53,"Date"],[59,61,101,57],[59,62,101,58,"now"],[59,65,101,61],[59,66,101,62],[60,8,102,4],[60,9,102,5],[60,10,102,6],[61,6,103,2],[62,4,103,3],[63,6,103,3,"key"],[63,9,103,3],[64,6,103,3,"value"],[64,11,103,3],[64,13,109,2],[64,22,109,9,"createFromOptions"],[64,39,109,26,"createFromOptions"],[64,40,109,27,"options"],[64,47,109,44],[64,49,109,52],[65,8,110,4,"_$$_REQUIRE"],[65,19,110,4],[65,20,110,4,"_dependencyMap"],[65,34,110,4],[65,57,110,17,"register"],[65,65,110,25],[65,66,110,26,"options"],[65,73,110,33],[65,74,110,34,"blobId"],[65,80,110,40],[65,81,110,41],[66,8,112,4],[66,15,112,11,"Object"],[66,21,112,17],[66,22,112,18,"assign"],[66,28,112,24],[66,29,112,25,"Object"],[66,35,112,31],[66,36,112,32,"create"],[66,42,112,38],[66,43,112,39,"_$$_REQUIRE"],[66,54,112,39],[66,55,112,39,"_dependencyMap"],[66,69,112,39],[66,84,112,44,"prototype"],[66,93,112,53],[66,94,112,54],[66,96,112,56],[67,10,113,6,"data"],[67,14,113,10],[67,16,117,8,"options"],[67,23,117,15],[67,24,117,16,"__collector"],[67,35,117,27],[67,39,117,31],[67,43,117,35],[67,46,117,35,"Object"],[67,52,117,35],[67,53,117,35,"assign"],[67,59,117,35],[67,64,119,17,"options"],[67,71,119,24],[68,12,120,14,"__collector"],[68,23,120,25],[68,25,120,27,"createBlobCollector"],[68,44,120,46],[68,45,120,47,"options"],[68,52,120,54],[68,53,120,55,"blobId"],[68,59,120,61],[69,10,120,62],[69,15,122,12,"options"],[70,8,123,4],[70,9,123,5],[70,10,123,6],[71,6,124,2],[72,4,124,3],[73,6,124,3,"key"],[73,9,124,3],[74,6,124,3,"value"],[74,11,124,3],[74,13,129,2],[74,22,129,9,"release"],[74,29,129,16,"release"],[74,30,129,17,"blobId"],[74,36,129,31],[74,38,129,39],[75,8,130,4],[75,12,130,4,"invariant"],[75,30,130,13],[75,32,130,14,"NativeBlobModule"],[75,57,130,30],[75,59,130,32],[75,91,130,64],[75,92,130,65],[76,8,132,4,"_$$_REQUIRE"],[76,19,132,4],[76,20,132,4,"_dependencyMap"],[76,34,132,4],[76,57,132,17,"unregister"],[76,67,132,27],[76,68,132,28,"blobId"],[76,74,132,34],[76,75,132,35],[77,8,133,4],[77,12,133,8,"_$$_REQUIRE"],[77,23,133,8],[77,24,133,8,"_dependencyMap"],[77,38,133,8],[77,61,133,21,"has"],[77,64,133,24],[77,65,133,25,"blobId"],[77,71,133,31],[77,72,133,32],[77,74,133,34],[78,10,134,6],[79,8,135,4],[80,8,136,4,"NativeBlobModule"],[80,33,136,20],[80,34,136,21,"release"],[80,41,136,28],[80,42,136,29,"blobId"],[80,48,136,35],[80,49,136,36],[81,6,137,2],[82,4,137,3],[83,6,137,3,"key"],[83,9,137,3],[84,6,137,3,"value"],[84,11,137,3],[84,13,143,2],[84,22,143,9,"addNetworkingHandler"],[84,42,143,29,"addNetworkingHandler"],[84,43,143,29],[84,45,143,38],[85,8,144,4],[85,12,144,4,"invariant"],[85,30,144,13],[85,32,144,14,"NativeBlobModule"],[85,57,144,30],[85,59,144,32],[85,91,144,64],[85,92,144,65],[86,8,146,4,"NativeBlobModule"],[86,33,146,20],[86,34,146,21,"addNetworkingHandler"],[86,54,146,41],[86,55,146,42],[86,56,146,43],[87,6,147,2],[88,4,147,3],[89,6,147,3,"key"],[89,9,147,3],[90,6,147,3,"value"],[90,11,147,3],[90,13,153,2],[90,22,153,9,"addWebSocketHandler"],[90,41,153,28,"addWebSocketHandler"],[90,42,153,29,"socketId"],[90,50,153,45],[90,52,153,53],[91,8,154,4],[91,12,154,4,"invariant"],[91,30,154,13],[91,32,154,14,"NativeBlobModule"],[91,57,154,30],[91,59,154,32],[91,91,154,64],[91,92,154,65],[92,8,156,4,"NativeBlobModule"],[92,33,156,20],[92,34,156,21,"addWebSocketHandler"],[92,53,156,40],[92,54,156,41,"socketId"],[92,62,156,49],[92,63,156,50],[93,6,157,2],[94,4,157,3],[95,6,157,3,"key"],[95,9,157,3],[96,6,157,3,"value"],[96,11,157,3],[96,13,163,2],[96,22,163,9,"removeWebSocketHandler"],[96,44,163,31,"removeWebSocketHandler"],[96,45,163,32,"socketId"],[96,53,163,48],[96,55,163,56],[97,8,164,4],[97,12,164,4,"invariant"],[97,30,164,13],[97,32,164,14,"NativeBlobModule"],[97,57,164,30],[97,59,164,32],[97,91,164,64],[97,92,164,65],[98,8,166,4,"NativeBlobModule"],[98,33,166,20],[98,34,166,21,"removeWebSocketHandler"],[98,56,166,43],[98,57,166,44,"socketId"],[98,65,166,52],[98,66,166,53],[99,6,167,2],[100,4,167,3],[101,6,167,3,"key"],[101,9,167,3],[102,6,167,3,"value"],[102,11,167,3],[102,13,172,2],[102,22,172,9,"sendOverSocket"],[102,36,172,23,"sendOverSocket"],[102,37,172,24,"blob"],[102,41,172,34],[102,43,172,36,"socketId"],[102,51,172,52],[102,53,172,60],[103,8,173,4],[103,12,173,4,"invariant"],[103,30,173,13],[103,32,173,14,"NativeBlobModule"],[103,57,173,30],[103,59,173,32],[103,91,173,64],[103,92,173,65],[104,8,175,4,"NativeBlobModule"],[104,33,175,20],[104,34,175,21,"sendOverSocket"],[104,48,175,35],[104,49,175,36,"blob"],[104,53,175,40],[104,54,175,41,"data"],[104,58,175,45],[104,60,175,47,"socketId"],[104,68,175,55],[104,69,175,56],[105,6,176,2],[106,4,176,3],[107,2,176,3],[108,2,52,6,"BlobManager"],[108,13,52,17],[108,14,56,9,"isAvailable"],[108,25,56,20],[108,28,56,32],[108,29,56,33],[108,30,56,34,"NativeBlobModule"],[108,55,56,50],[109,2,179,0,"module"],[109,8,179,6],[109,9,179,7,"exports"],[109,16,179,14],[109,19,179,17,"BlobManager"],[109,30,179,28],[110,0,179,29],[110,3]],"functionMap":{"names":["<global>","uuidv4","xxxxxxxxXxxx4xxxYxxxXxxxxxxxxxxx.replace$argument_1","createBlobCollector","BlobManager","createFromParts","parts.map$argument_0","items.reduce$argument_0","createFromOptions","release","addNetworkingHandler","addWebSocketHandler","removeWebSocketHandler","sendOverSocket"],"mappings":"AAA;ACyB;iECC;GDI;CDC;AGS;CHM;AIK;ECS;4BCO;KDiB;8BEC;KFM;GDW;EIM;GJe;EKK;GLQ;EMM;GNI;EOM;GPI;EQM;GRI;ESK;GTI;CJC"}},"type":"js/module"}]}